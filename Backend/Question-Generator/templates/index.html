<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Glassy Scrolling Top Banner</title>
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <header class="banner" role="banner" aria-label="Scrolling welcome banner">
    <div class="marquee" aria-hidden="true">
      <div class="marquee__track">
        <span class="marquee__text">Welcome • Welcome • Welcome • Welcome • Welcome •</span>
        <span class="marquee__text">Welcome to AI Plugin For Moodle</span>
        <span class="marquee__text">Where you can generate Quizzes And Assignments as well</span>
        <span class="marquee__text">Our Plugin also Autograde Quizzes and Assignment for Real Time Student Analysis •</span>
      </div>
    </div>
  </header>

  <main>
    <div class="cards-container">
      <!-- AI-Powered Quiz Card (without customization options) -->
      <div class="quiz-card" id="card-auto">
        <i class='bx bx-brain card-icon'></i>
        <h2>AI-Powered Quiz</h2>
        <p>Upload your study material in PDF format and let our AI automatically create a quiz for you.</p>
        <button class="generate-btn" id="btn-open-auto">Generate Quiz</button>
      </div>

      <!-- Customize Quiz Card (with customization options) -->
      <div class="quiz-card">
        <i class='bx bx-slider-alt card-icon'></i>
        <h2>Customize Quiz</h2>
        <p>Pick exact counts per type, plus scenario/code flags.</p>
        <button class="generate-btn" id="btn-open-custom">Customize Now</button>
      </div>

      <!-- Manual Creation Card -->
      <div class="quiz-card">
        <i class='bx bx-edit card-icon'></i>
        <h2>Manual Creation</h2>
        <p>Create questions from scratch with full control.</p>
        <button class="generate-btn" disabled title="Coming soon">Start Creating</button>
      </div>
    </div>

    <!-- Generated Quiz Output Section -->
    <section id="quiz-section" aria-live="polite" style="display:none">
      <div class="quiz-out-head">
        <h2>Generated Quiz</h2>
        <div class="quiz-actions">
          <button class="btn" id="btn-copy-quiz" type="button">Copy as Text</button>
          <button class="btn" id="btn-save-json" type="button">Save JSON</button>
        </div>
      </div>
      <div id="quiz-container" class="quiz-out"></div>
    </section>
  </main>

  <div id="toast" class="toast"></div>

  <!-- Modal for Auto Quiz Generation -->
  <div id="modal-auto" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitleAuto">
    <div class="modal-card">
      <div class="modal-head">
        <h3 id="modalTitleAuto">Generate Quiz from PDF</h3>
        <div class="modal-actions">
          <button class="btn ghost" id="btn-cancel">Close</button>
          <button class="btn primary" id="btn-generate">Generate</button>
        </div>
      </div>

      <div class="section-title">1) Upload PDF</div>
      <div id="uploader" class="uploader">
        <b>Drop PDF here</b> or click to select
        <small>Accepted: .pdf (max ~25MB)</small>
        <input id="fileInput" type="file" accept="application/pdf" hidden />
      </div>

      <div class="progress" id="progress"><div></div></div>
    </div>
  </div>

  <!-- Modal for Customized Quiz Generation -->
  <div id="modal-custom" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitleCustom">
    <div class="modal-card">
      <div class="modal-head">
        <h3 id="modalTitleCustom">Customize Quiz from PDF</h3>
        <div class="modal-actions">
          <button class="btn ghost" id="btn-cancel-custom">Close</button>
          <button class="btn primary" id="btn-generate-custom">Generate</button>
        </div>
      </div>

      <div class="section-title">1) Upload PDF</div>
      <div id="uploader-custom" class="uploader">
        <b>Drop PDF here</b> or click to select
        <small>Accepted: .pdf (max ~25MB)</small>
        <input id="fileInputCustom" type="file" accept="application/pdf" hidden />
      </div>
       <!-- Subtopics detection UI (hidden until detected) -->
      <div style="margin-top:12px;">
        <button id="btn-detect-subtopics" type="button" class="btn">Detect Subtopics</button>
      </div>

      <div id="subtopics-section" style="display:none; margin-top:10px;">
        <p><strong>Select subtopics:</strong></p>
        <div id="subtopics-list" class="subtopics-list"></div>
        <label style="display:block; margin-top:8px;">
          Questions per subtopic:
          <input id="count-per-subtopic" type="number" min="1" value="2" style="width:60px;">
        </label>
      </div>

      <div class="section-title">2) Question Counts</div>
      <div class="counts-grid">
        <div class="field">
          <label class="label" for="mcqCount">MCQ</label>
          <input id="mcqCount" type="number" min="0" max="30" value="4" />
        </div>
        <div class="field">
          <label class="label" for="tfCount">True / False</label>
          <input id="tfCount" type="number" min="0" max="30" value="0" />
        </div>
        <div class="field">
          <label class="label" for="shortCount">Short</label>
          <input id="shortCount" type="number" min="0" max="20" value="5" />
        </div>
        <div class="field">
          <label class="label" for="longCount">Long</label>
          <input id="longCount" type="number" min="0" max="20" value="0" />
        </div>
        <div class="field">
          <label class="label" for="scenarioCount">Scenario-based questions</label>
          <input id="scenarioCount" type="number" min="0" max="20" value="0" />
        </div>
        <div class="field">
          <label class="label" for="codeCount">Code-snippet questions</label>
          <input id="codeCount" type="number" min="0" max="20" value="0" />
        </div>
      </div>

      <div class="section-title">3) Difficulty level</div>
      <div class="form-row">
        <div class="field">
          <label class="label">Mode</label>
          <select id="difficultyModeCustom">
            <option value="auto">Auto (AI decides)</option>
            <option value="custom">Custom % mix</option>
          </select>
          <div class="hint">Use custom only if you want a specific E/M/H distribution.</div>
        </div>
        <div class="field">
          <label class="label">Validate</label>
          <button class="btn" id="btn-validate-mix" type="button">Sum = 100%</button>
        </div>
      </div>
      <div id="diffRowC1" class="form-row" style="display:none">
        <div class="field">
          <label class="label">Easy %</label>
          <input id="easyPctC" type="number" min="0" max="100" value="30" />
        </div>
        <div class="field">
          <label class="label">Medium %</label>
          <input id="medPctC" type="number" min="0" max="100" value="50" />
        </div>
      </div>
      <div id="diffRowC2" class="form-row" style="display:none">
        <div class="field">
          <label class="label">Hard %</label>
          <input id="hardPctC" type="number" min="0" max="100" value="20" />
        </div>
      </div>

      <div class="progress" id="progress-custom"><div></div></div>
    </div>
  </div>

  <script src="{{ url_for('static', filename='script.js') }}" defer></script>
  <script src="{{ url_for('static', filename='modal.js') }}" defer></script>
  <script src="{{ url_for('static', filename='customizeModal.js') }}" defer></script>

</body>
</html>
